<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{.Title}}</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style id="theme-css">
{{.ThemeCSS}}
</style>
</head>
<body>
<script>
// Theme management - fetch CSS based on localStorage
(function() {
  const savedTemplate = localStorage.getItem('template') || 'nordic';
  const savedScheme = localStorage.getItem('scheme') || 'default';

  document.documentElement.setAttribute('data-template', savedTemplate);
  document.documentElement.setAttribute('data-scheme', savedScheme);

  // Fetch theme CSS from API with timeout
  var themeController = new AbortController();
  var themeTimeout = setTimeout(function() { themeController.abort(); }, 2000);
  fetch('/api/theme?template=' + encodeURIComponent(savedTemplate) + '&scheme=' + encodeURIComponent(savedScheme), {
    signal: themeController.signal
  })
    .then(function(res) {
      clearTimeout(themeTimeout);
      return res.text();
    })
    .then(function(css) {
      var style = document.getElementById('theme-css');
      if (style) style.textContent = css;
    })
    .catch(function(err) {
      clearTimeout(themeTimeout);
      if (err.name !== 'AbortError') {
        console.error('Failed to load theme:', err);
      }
    });

  window.addEventListener('DOMContentLoaded', function() {
    var hiddenMenus = document.createElement('div');
    hiddenMenus.style.display = 'none';
    hiddenMenus.innerHTML = '<div id="schemeMenu">{{.SchemeMenuHTML}}</div>';
    document.body.appendChild(hiddenMenus);

    // Load saved page title
    var savedTitle = localStorage.getItem('pageTitle');
    if (savedTitle) {
      document.title = savedTitle;
      var headerTitle = document.querySelector('.h-title');
      if (headerTitle) {
        headerTitle.textContent = savedTitle;
      }
    }
  });
})();
</script>
<script>
// Service Worker Registration - non-blocking
if ('serviceWorker' in navigator) {
  // Don't wait for load event - register immediately but don't block
  setTimeout(function() {
    navigator.serviceWorker.register('/sw.js', { scope: '/' })
      .then(function(registration) {
        console.log('[Service Worker] Registration successful:', registration.scope);

        // Check for updates
        registration.addEventListener('updatefound', function() {
          const newWorker = registration.installing;
          newWorker.addEventListener('statechange', function() {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              console.log('[Service Worker] New version available. Reload to update.');
            }
          });
        });
      })
      .catch(function(error) {
        console.error('[Service Worker] Registration failed:', error);
      });
  }, 0);
}
</script>

  <div class="header">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <div class="h-title">{{.Title}}</div>
        <div class="h-sub" id="subtitle">Loading…</div>
      </div>
    </div>
    <div class="search">
      <div class="searchbox">
        <input id="q" placeholder="Search…" autocomplete="off" />
        <div class="drop">
          <div class="pill" id="engineBtn">Google ▾</div>
          <div class="menu" id="engineMenu"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="main" id="mainContainer">
    <div id="moduleGrid">
      <div class="card span-4" data-module="status" draggable="true">
        <h3><i class="fas fa-server"></i> <span id="statusTitle">Status</span><div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="serverInfo">
          <div class="kv"><div class="k">Status</div><div class="v mono"><span class="pulse" style="display:inline-block; margin-right:8px; vertical-align:middle;"></span><span id="statusText">Online</span></div></div>
          <div class="kv"><div class="k">Host</div><div class="v mono" id="host">—</div></div>
          <div class="kv"><div class="k">Uptime</div><div class="v mono" id="uptime">—</div></div>
          <div class="kv"><div class="k">Server</div><div class="v mono" id="time">—</div></div>
          <div class="kv"><div class="k">UTC</div><div class="v mono" id="utcTime">—</div></div>
        </div>
        <div id="clientInfo" style="display:none; margin-top:12px; padding-top:12px; border-top:1px solid var(--border);">
          <div class="kv"><div class="k">Client IP</div><div class="v mono" id="clientIP">—</div></div>
          <div class="kv"><div class="k">Client Hostname</div><div class="v mono" id="clientHostname">—</div></div>
        </div>
      </div>

      <div class="card span-4" data-module="network" draggable="true">
        <h3><i class="fas fa-network-wired"></i> Network<div class="header-icons"><div class="timer-circle" id="ipTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="kv"><div class="k"><span id="lanIpLabel">LAN IPs</span></div><div class="v mono"><span id="lanIps">—</span><div class="small ptr" id="lanPtr"></div></div></div>
        <div class="kv"><div class="k">Public IP</div><div class="v mono" style="text-align: right;"><span id="pubIp">—</span><div class="small ptr" id="pubPtr"></div></div></div>
        <div class="small" id="pubIpErr"></div>
        <div class="small" id="networkNote" style="margin-top:8px; color:var(--muted);"></div>
      </div>

      <div class="card span-4" data-module="weather" draggable="true">
        <h3><i class="fas fa-cloud-sun"></i> Weather <span class="dim" id="weatherLocation"></span><div class="header-icons"><div class="timer-circle" id="weatherTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="weather-row" id="weatherNow">
          <span class="weather-label">Now</span>
          <span class="weather-icon" id="weatherNowIcon">—</span>
          <span class="weather-data" id="weatherNowData">—</span>
        </div>
        <div class="weather-row" id="weatherToday">
          <span class="weather-label">Today</span>
          <span class="weather-icon" id="weatherTodayIcon">—</span>
          <span class="weather-data" id="weatherTodayData">—</span>
        </div>
        <div id="weatherTodayDetails" style="display:none;">
          <div class="weather-row">
            <span class="weather-label"></span>
            <span class="weather-icon"></span>
            <span class="weather-data" id="weatherTodayDetailsData1"></span>
          </div>
          <div class="weather-row">
            <span class="weather-label"></span>
            <span class="weather-icon"></span>
            <span class="weather-data" id="weatherTodayDetailsData2"></span>
          </div>
        </div>
        <div class="weather-row" id="weatherTomorrow">
          <span class="weather-label">Tomorrow</span>
          <span class="weather-icon" id="weatherTomorrowIcon">—</span>
          <span class="weather-data" id="weatherTomorrowData">—</span>
        </div>
        <div id="weatherTomorrowDetails" style="display:none;">
          <div class="weather-row">
            <span class="weather-label"></span>
            <span class="weather-icon"></span>
            <span class="weather-data" id="weatherTomorrowDetailsData1"></span>
          </div>
          <div class="weather-row">
            <span class="weather-label"></span>
            <span class="weather-icon"></span>
            <span class="weather-data" id="weatherTomorrowDetailsData2"></span>
          </div>
        </div>
        <div class="small" id="weatherErr"></div>
      </div>

      <div class="card span-4" data-module="cpu" draggable="true">
        <h3><i class="fas fa-microchip"></i> CPU<div class="header-icons"><div class="timer-circle" id="cpuTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="kv"><div class="k">Usage</div><div class="v" id="cpuUsage">—</div></div>
        <div class="small" id="cpuErr"></div>
        <div class="cpu-graph" id="cpuGraph"></div>
      </div>

      <div class="card span-4" data-module="ram" draggable="true">
        <h3><i class="fas fa-memory"></i> RAM<div class="header-icons"><div class="timer-circle" id="ramTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="kv-vertical">
          <div class="k-small">Total / Used / Free</div>
          <div class="v mono" id="ramSummary">—</div>
        </div>
        <div class="kv-vertical">
          <div class="k-small">Usage</div>
          <div class="v" id="ramPercent">—</div>
        </div>
        <div class="small" id="ramErr"></div>
        <div class="usage-graph" id="ramGraph"></div>
      </div>


      <div class="card span-4" data-module="cpuid" draggable="true">
        <h3><i class="fas fa-microchip"></i> CPU Info<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="cpuidContent">
          <div class="muted">Loading...</div>
        </div>
      </div>

      <div class="card span-4" data-module="raminfo" draggable="true">
        <h3><i class="fas fa-memory"></i> RAM Info<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="raminfoContent">
          <div class="muted">Loading...</div>
        </div>
      </div>

      <div class="card span-4" data-module="firmware" draggable="true">
        <h3><i class="fas fa-microchip"></i> Firmware<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="firmwareContent">
          <div class="muted">Loading...</div>
        </div>
      </div>

      <div class="card span-4" data-module="systeminfo" draggable="true">
        <h3><i class="fas fa-desktop"></i> System<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="systeminfoContent">
          <div class="muted">Loading...</div>
        </div>
      </div>

      <div class="card span-4" data-module="baseboard" draggable="true">
        <h3><i class="fas fa-server"></i> Baseboard<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="baseboardContent">
          <div class="muted">Loading...</div>
        </div>
      </div>

      <div class="card span-6" data-module="links" draggable="true">
        <h3><i class="fas fa-link"></i> Quick Links<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="quicklinksContainer">
          <div class="small" style="color:var(--muted);">Add links in Preferences → Quicklinks</div>
        </div>
      </div>

      <div class="card span-6" data-module="monitoring" draggable="true">
        <h3><i class="fas fa-heartbeat"></i> Monitoring<div class="header-icons"><div class="timer-circle" id="monitoringTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="monitoringContainer">
          <div class="small" style="color:var(--muted);">Add services in Preferences → Monitoring</div>
        </div>
      </div>

      <div class="card span-6" data-module="snmp" draggable="true">
        <h3><i class="fas fa-network-wired"></i> SNMP<div class="header-icons"><div class="timer-circle" id="snmpTimer" title="Double-click to refresh"></div><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="snmpContainer">
          <div class="small" style="color:var(--muted);">Add queries in Preferences → SNMP</div>
        </div>
      </div>

      <div class="card span-4" data-module="calendar" draggable="true">
        <h3><i class="fas fa-calendar-alt"></i> Calendar<div class="header-icons"><button class="btn-icon" id="calTodayBtn" title="Go to current month"><i class="fas fa-dot-circle"></i></button><button class="btn-icon" id="calPrevBtn" title="Previous month"><i class="fas fa-chevron-left"></i></button><button class="btn-icon" id="calNextBtn" title="Next month"><i class="fas fa-chevron-right"></i></button><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="calendar-nav">
          <span id="calendarTitle"></span>
        </div>
        <div id="calendarGrid" class="calendar-grid"></div>
      </div>

      <div class="card span-4" data-module="events" draggable="true">
        <h3><i class="fas fa-calendar-check"></i> Upcoming Events<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="upcomingEventsList">
          <div class="muted" style="padding:8px 0;">No upcoming events</div>
        </div>
      </div>

      <div class="card span-4" data-module="todo" draggable="true">
        <h3><i class="fas fa-tasks"></i> Next Todos<div class="header-icons"><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div id="nextTodosList">
          <div class="muted" style="padding:8px 0;">No todos</div>
        </div>
      </div>

      <div class="card span-6" data-module="weekcalendar" draggable="true">
        <h3><i class="fas fa-calendar-week"></i> Week<div class="header-icons"><button class="btn-icon" id="weekTodayBtn" title="Go to current week"><i class="fas fa-dot-circle"></i></button><button class="btn-icon" id="weekPrevBtn" title="Previous week"><i class="fas fa-chevron-left"></i></button><button class="btn-icon" id="weekNextBtn" title="Next week"><i class="fas fa-chevron-right"></i></button><i class="fas fa-grip-vertical drag-handle" title="Drag to reorder"></i></div></h3>
        <div class="calendar-nav">
          <span id="weekCalendarTitle"></span>
        </div>
        <div id="weekCalendarGrid" class="week-calendar-grid"></div>
      </div>
    </div>

    <div id="githubModulesContainer" class="grid" style="margin-top: 12px;"></div>
    <div id="rssModulesContainer" class="grid" style="margin-top: 12px;"></div>
    <div id="diskModulesContainer" class="grid" style="margin-top: 12px;"></div>
  </div>

  <div class="footer">
    <div class="left">
      <div class="small">Shortcuts:</div>
      <div class="badge"><span class="mono">/</span><span class="small">focus search</span></div>
      <div class="badge"><span class="mono">Enter</span><span class="small">search</span></div>
      <div class="badge"><span class="mono">E</span><span class="small">engine</span></div>
    </div>
    <div class="right">
      <a class="btn" href="/api/summary" target="_blank" rel="noreferrer"><i class="fas fa-code"></i> API</a>
      <a class="btn" href="/healthz" target="_blank" rel="noreferrer"><i class="fas fa-heartbeat"></i> Health</a>
      <div class="btn" id="refreshBtn"><i class="fas fa-sync-alt"></i> Refresh</div>
      <div class="btn" id="prefsBtn"><i class="fas fa-cog"></i> Preferences</div>
    </div>
  </div>

  <!-- Preferences Modal -->
  <div class="modal-overlay" id="prefsModal">
    <div class="modal">
      <div class="modal-header">
        <h2><i class="fas fa-cog"></i> Preferences</h2>
        <button class="modal-close" id="prefsClose"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-tabs">
        <button class="modal-tab active" data-tab="general"><i class="fas fa-sliders-h"></i> General</button>
        <button class="modal-tab" data-tab="layout"><i class="fas fa-columns"></i> Layout</button>
        <button class="modal-tab" data-tab="modules"><i class="fas fa-th-large"></i> Modules</button>
        <button class="modal-tab" data-tab="quicklinks"><i class="fas fa-link"></i> Quicklinks</button>
        <button class="modal-tab" data-tab="monitoring"><i class="fas fa-heartbeat"></i> Monitoring</button>
        <button class="modal-tab" data-tab="snmp"><i class="fas fa-network-wired"></i> SNMP</button>
        <button class="modal-tab" data-tab="config"><i class="fas fa-download"></i> Config</button>
        <button class="modal-tab" data-tab="calendar"><i class="fas fa-calendar-alt"></i> Calendar</button>
        <button class="modal-tab" data-tab="todo"><i class="fas fa-tasks"></i> Todo</button>
        <button class="modal-tab" data-tab="search"><i class="fas fa-search"></i> Search</button>
        <button class="modal-tab" data-tab="weather"><i class="fas fa-cloud-sun"></i> Weather</button>
        <button class="modal-tab" data-tab="debug"><i class="fas fa-bug"></i> Debug</button>
        <button class="modal-tab" data-tab="about"><i class="fas fa-info-circle"></i> About</button>
      </div>
      <div class="modal-content">
        <!-- General Tab -->
        <div class="tab-content active" id="tab-general">
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; align-items:start;">
            <div style="display:flex; flex-direction:column; gap:20px;">
              <div class="pref-section">
                <h3>Appearance</h3>
                <div class="pref-row">
                  <label>Theme</label>
                  <select id="pref-template">
                    {{range .TemplatesList}}<option value="{{.}}">{{.}}</option>{{end}}
                  </select>
                </div>
                <div class="pref-row">
                  <label>Color Scheme</label>
                  <select id="pref-scheme"></select>
                </div>
                <div class="pref-row">
                  <label>Title</label>
                  <div class="location-input">
                    <input type="text" id="pref-title" placeholder="LAN Index" style="flex:1;">
                    <button class="btn-small" id="resetTitleBtn" title="Reset to LAN Index"><i class="fas fa-undo"></i></button>
                  </div>
                </div>
                <h3>Timers</h3>
                <div class="pref-row">
                  <label>Disk Refresh</label>
                  <div class="location-input">
                    <input type="number" id="pref-disk-interval" value="15" min="5" max="3600" style="width:80px;">
                    <span class="small">seconds</span>
                  </div>
                </div>
                <div class="pref-row">
                  <label>RSS Refresh</label>
                  <div class="location-input">
                    <input type="number" id="pref-rss-interval" value="300" min="60" max="86400" style="width:80px;">
                    <span class="small">seconds</span>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:flex; flex-direction:column; gap:20px;">
              <div class="pref-section">
                <h3>Graphs</h3>
                <div class="pref-row">
                  <label>Show full bar height</label>
                  <input type="checkbox" id="pref-full-bars" title="Show the unused portion of bars in a dimmed color">
                </div>
                <div class="pref-row">
                  <label>Minimum bar width</label>
                  <div class="location-input">
                    <input type="number" id="pref-min-bar-width" value="10" min="2" max="50" style="width:80px;">
                    <span class="small">pixels</span>
                  </div>
                </div>
                <div class="pref-row">
                  <label>GitHub API Key</label>
                  <div class="location-input">
                    <input type="password" id="pref-github-token" placeholder="ghp_xxxxxxxxxxxx" style="flex:1;">
                    <button class="btn-small" id="toggleGithubToken" title="Show/hide token"><i class="fas fa-eye"></i></button>
                  </div>
                </div>
              </div>
              <div class="pref-section">
                <h3>Data</h3>
                <div class="pref-row">
                  <label>Clear cached data</label>
                  <button class="btn-small" id="clearCacheBtn"><i class="fas fa-trash"></i> Clear Cache</button>
                </div>
                <div class="pref-row">
                  <label>Reset module order</label>
                  <button class="btn-small" id="resetOrderBtn"><i class="fas fa-undo"></i> Reset Order</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendar Tab -->
        <div class="tab-content" id="tab-calendar">
          <div class="pref-section">
            <h3>Month View Settings</h3>
            <div class="pref-row">
              <label>Dim weekends</label>
              <input type="checkbox" id="pref-dim-weekends" title="Show Saturday and Sunday dimmer">
            </div>
          </div>
          <div class="pref-section">
            <h3>Week View Settings</h3>
            <div class="pref-row">
              <label>Work week only</label>
              <input type="checkbox" id="pref-work-week" title="Show only Monday to Friday">
            </div>
            <div class="pref-row">
              <label>Week starts on</label>
              <select id="pref-week-start-day">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="6">Saturday</option>
              </select>
            </div>
          </div>
          <div class="pref-section">
            <h3>Events <button class="btn-small" id="addEventBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="eventsList" style="max-height:300px; overflow-y:auto;"></div>
          </div>
          <div class="pref-section" id="eventForm" style="display:none;">
            <h3>Add / Edit Event</h3>
            <input type="hidden" id="event-id">
            <div class="pref-row">
              <label>Title</label>
              <input type="text" id="event-title" placeholder="Event title" style="flex:1;">
            </div>
            <div class="pref-row">
              <label>Date</label>
              <input type="date" id="event-date" style="width:180px;">
            </div>
            <div class="pref-row">
              <label>Time</label>
              <input type="time" id="event-time" style="width:120px;">
            </div>
            <div class="pref-row">
              <label></label>
              <div>
                <button class="btn-small" id="saveEventBtn"><i class="fas fa-check"></i> Save</button>
                <button class="btn-small" id="cancelEventBtn"><i class="fas fa-times"></i> Cancel</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Todo Tab -->
        <div class="tab-content" id="tab-todo">
          <div class="pref-section">
            <h3>Todos <button class="btn-small" id="addTodoBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="todosList" style="max-height:400px; overflow-y:auto;"></div>
          </div>
          <div class="pref-section" id="todoForm" style="display:none;">
            <h3>Add / Edit Todo</h3>
            <input type="hidden" id="todo-id">
            <div class="pref-row">
              <label>Title</label>
              <input type="text" id="todo-title" placeholder="Todo title" style="flex:1;">
            </div>
            <div class="pref-row">
              <label>Priority</label>
              <select id="todo-priority" style="width:150px;">
                <option value="">None</option>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
            <div class="pref-row">
              <label>Due Date</label>
              <input type="date" id="todo-due-date" style="width:180px;">
            </div>
            <div class="pref-row">
              <label></label>
              <div>
                <button class="btn-small" id="saveTodoBtn"><i class="fas fa-check"></i> Save</button>
                <button class="btn-small" id="cancelTodoBtn"><i class="fas fa-times"></i> Cancel</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Search Tab -->
        <div class="tab-content" id="tab-search">
          <div class="pref-section">
            <h3>Search History</h3>
            <div class="pref-row">
              <label>Search in history</label>
              <input type="text" id="searchHistoryFilter" placeholder="Filter searches..." style="flex:1;">
            </div>
            <div class="pref-row">
              <label></label>
              <button class="btn-small" id="clearSearchHistoryBtn"><i class="fas fa-trash"></i> Clear All</button>
            </div>
            <div class="module-list" id="searchHistoryList" style="max-height:500px; overflow-y:auto; margin-top:12px;"></div>
          </div>
        </div>

        <!-- Layout Tab -->
        <div class="tab-content" id="tab-layout">
          <div class="pref-section">
            <h3>Container Width</h3>
            <div class="pref-row">
              <label>Max Width</label>
              <select id="layoutMaxWidth">
                <option value="30">30%</option>
                <option value="40">40%</option>
                <option value="50">50%</option>
                <option value="60">60%</option>
                <option value="70">70%</option>
                <option value="80">80%</option>
                <option value="90">90%</option>
                <option value="100">100%</option>
              </select>
            </div>
          </div>
          <div class="pref-section">
            <h3>Row Layout Editor</h3>
            <div id="layoutEditor"></div>
            <div style="margin-top: 12px;">
              <button class="btn-small" id="addRowBtn"><i class="fas fa-plus"></i> Add Row</button>
            </div>
          </div>
        </div>

        <!-- Modules Tab -->
        <div class="tab-content" id="tab-modules">
          <div class="pref-section">
            <h3>Module Settings</h3>
            <div class="module-list" id="moduleList"></div>
          </div>
          <div class="pref-section">
            <h3>GitHub Modules <button class="btn-small" id="addGitHubBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="githubModuleList"></div>
          </div>
          <div class="pref-section">
            <h3>RSS Modules <button class="btn-small" id="addRssBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="rssModuleList"></div>
          </div>
          <div class="pref-section">
            <h3>Disk Modules <button class="btn-small" id="addDiskBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="diskModuleList"></div>
          </div>
        </div>

        <!-- Quicklinks Tab -->
        <div class="tab-content" id="tab-quicklinks">
          <div class="pref-section">
            <h3>Layout</h3>
            <div class="layout-buttons">
              <button class="layout-btn" data-cols="1" title="1 link per row"><i class="fas fa-bars"></i></button>
              <button class="layout-btn" data-cols="2" title="2 links per row"><i class="fas fa-th-large"></i></button>
              <button class="layout-btn" data-cols="3" title="3 links per row"><i class="fas fa-th"></i></button>
            </div>
          </div>
          <div class="pref-section">
            <h3>Quick Links <button class="btn-small" id="addQuicklinkBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="quicklinksList"></div>
          </div>
          <div class="pref-section">
            <h3>Add / Edit Link</h3>
            <div id="quicklinkForm" style="display:none;">
              <div class="pref-row">
                <label>Title</label>
                <input type="text" id="ql-title" placeholder="e.g., Router">
              </div>
              <div class="pref-row">
                <label>URL</label>
                <input type="text" id="ql-url" placeholder="e.g., http://192.168.1.1">
              </div>
              <div class="pref-row">
                <label>Icon</label>
                <div class="icon-selector">
                  <select id="ql-icon">
                    <option value="">Use favicon</option>
                    <option value="fa-network-wired">Network</option>
                    <option value="fa-server">Server</option>
                    <option value="fa-hdd">Storage</option>
                    <option value="fa-database">Database</option>
                    <option value="fa-cloud">Cloud</option>
                    <option value="fa-home">Home</option>
                    <option value="fa-cog">Settings</option>
                    <option value="fa-chart-line">Charts</option>
                    <option value="fa-shield-alt">Security</option>
                    <option value="fa-video">Video</option>
                    <option value="fa-music">Music</option>
                    <option value="fa-book">Docs</option>
                    <option value="fa-code">Code</option>
                    <option value="fa-terminal">Terminal</option>
                    <option value="fa-download">Downloads</option>
                    <option value="fa-envelope">Mail</option>
                    <option value="fa-calendar">Calendar</option>
                    <option value="fa-globe">Web</option>
                    <option value="fa-wifi">WiFi</option>
                    <option value="fa-lock">Lock</option>
                  </select>
                  <button class="btn-small" id="ql-clear-icon" title="Clear icon selection"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="pref-row" style="justify-content:flex-end; gap:10px;">
                <button class="btn-small" id="ql-cancel">Cancel</button>
                <button class="btn-small" id="ql-save" style="background:var(--accent); color:var(--bg);"><i class="fas fa-check"></i> Save</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Monitoring Tab -->
        <div class="tab-content" id="tab-monitoring">
          <div class="pref-section">
            <h3>Refresh Interval</h3>
            <div class="pref-row">
              <label>Check every</label>
              <div class="location-input">
                <input type="number" id="monitor-interval" value="60" min="5" max="3600" style="width:80px;">
                <span class="small">seconds</span>
              </div>
            </div>
          </div>
          <div class="pref-section">
            <h3>Services <button class="btn-small" id="addMonitorBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="monitorsList"></div>
          </div>
          <div class="pref-section">
            <h3>Add / Edit Service</h3>
            <div id="monitorForm" style="display:none;">
              <div class="pref-row">
                <label>Name</label>
                <input type="text" id="mon-name" placeholder="e.g., Web Server">
              </div>
              <div class="pref-row">
                <label>Type</label>
                <select id="mon-type">
                  <option value="http">HTTP Check</option>
                  <option value="port">Port Check</option>
                  <option value="ping">Ping</option>
                </select>
              </div>
              <div class="pref-row" id="mon-url-row">
                <label>URL</label>
                <input type="text" id="mon-url" placeholder="e.g., https://example.com">
              </div>
              <div class="pref-row" id="mon-host-row" style="display:none;">
                <label>Host</label>
                <input type="text" id="mon-host" placeholder="e.g., 192.168.1.1">
              </div>
              <div class="pref-row" id="mon-port-row" style="display:none;">
                <label>Port</label>
                <input type="number" id="mon-port" placeholder="e.g., 443" min="1" max="65535">
              </div>
              <div class="pref-row" style="justify-content:flex-end; gap:10px;">
                <button class="btn-small" id="mon-cancel">Cancel</button>
                <button class="btn-small" id="mon-save" style="background:var(--accent); color:var(--bg);"><i class="fas fa-check"></i> Save</button>
              </div>
            </div>
          </div>
        </div>

        <!-- SNMP Tab -->
        <div class="tab-content" id="tab-snmp">
          <div class="pref-section">
            <h3>SNMP Queries <button class="btn-small" id="addSnmpBtn"><i class="fas fa-plus"></i> Add</button></h3>
            <div class="module-list" id="snmpList"></div>
          </div>
          <div class="pref-section">
            <h3>Add / Edit SNMP Query</h3>
            <div id="snmpForm" style="display:none;">
              <div class="pref-row">
                <label>Title</label>
                <input type="text" id="snmp-title" placeholder="e.g., Router Uptime">
              </div>
              <div class="pref-row">
                <label>Host</label>
                <input type="text" id="snmp-host" placeholder="192.168.1.1">
              </div>
              <div class="pref-row">
                <label>Port</label>
                <input type="number" id="snmp-port" placeholder="161" value="161" min="1" max="65535">
              </div>
              <div class="pref-row">
                <label>Community</label>
                <input type="text" id="snmp-community" placeholder="public">
              </div>
              <div class="pref-row">
                <label>OID</label>
                <input type="text" id="snmp-oid" placeholder="1.3.6.1.2.1.1.3.0">
              </div>
              <div class="pref-row">
                <label>Display Type</label>
                <select id="snmp-display-type">
                  <option value="show">Show</option>
                  <option value="diff">Diff</option>
                  <option value="period-diff">Period Diff</option>
                </select>
              </div>
              <div class="pref-row">
                <label>Prefix</label>
                <input type="text" id="snmp-prefix" placeholder="e.g., Speed: ">
              </div>
              <div class="pref-row">
                <label>Suffix</label>
                <input type="text" id="snmp-suffix" placeholder="e.g., bps">
              </div>
              <div class="pref-row">
                <label>Divisor</label>
                <div style="display:flex; align-items:center; gap:8px;">
                  <select id="snmp-divisor">
                    <option value="1">1</option>
                    <option value="10">10</option>
                    <option value="100">100</option>
                    <option value="1000">1,000</option>
                    <option value="10000">10,000</option>
                    <option value="100000">100,000</option>
                    <option value="1000000">1,000,000</option>
                    <option value="1000000000">1,000,000,000</option>
                  </select>
                  <label style="display:flex; align-items:center; gap:4px; font-size:12px; cursor:pointer;">
                    <input type="checkbox" id="snmp-si-units" style="margin:0;">
                    <span>SI units</span>
                  </label>
                </div>
              </div>
              <div class="pref-row" style="justify-content:flex-end; gap:10px;">
                <button class="btn-small" id="snmp-cancel">Cancel</button>
                <button class="btn-small" id="snmp-save" style="background:var(--accent); color:var(--bg);"><i class="fas fa-check"></i> Save</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Config Tab -->
        <div class="tab-content" id="tab-config">
          <div class="pref-section">
            <h3>Local Config</h3>
            <div class="pref-row">
              <label>Export</label>
              <button class="btn-small" id="exportConfigBtn"><i class="fas fa-download"></i> Export Config</button>
            </div>
            <div class="pref-row">
              <label>Import</label>
              <div style="display:flex; gap:8px; align-items:center;">
                <input type="file" id="importConfigFile" accept=".json" style="display:none;">
                <button class="btn-small" id="importConfigBtn"><i class="fas fa-upload"></i> Import Config</button>
              </div>
            </div>
          </div>
          <div class="pref-section">
            <h3>Server Side</h3>
            <div class="pref-row">
              <label>Config Name</label>
              <div style="display:flex; gap:8px; align-items:center; flex:1;">
                <input type="text" id="configNameInput" placeholder="Enter config name" style="flex:1;">
                <button class="btn-small" id="uploadConfigBtn"><i class="fas fa-upload"></i> Upload</button>
              </div>
            </div>
            <div class="pref-row" style="align-items:flex-start;">
              <label>Stored Configs</label>
              <div style="flex:1; display:flex; flex-direction:column; gap:8px;">
                <div id="serverConfigsList" style="min-height:100px; border:1px solid var(--border); border-radius:6px; padding:8px; background:var(--panel2);">
                  <div class="small" style="color:var(--muted);">Loading...</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- About Tab -->
        <!-- Weather Tab -->
        <div class="tab-content" id="tab-weather">
          <div class="pref-section">
            <h3>Location</h3>
            <div class="pref-row">
              <label>Search Location</label>
              <div class="location-input">
                <input type="text" id="pref-weather-location" placeholder="e.g., Athens, Greece">
                <button class="btn-small" id="searchLocationBtn"><i class="fas fa-search"></i></button>
              </div>
            </div>
            <div class="pref-row" id="locationResultsRow" style="display:none;">
              <label>Select</label>
              <div class="location-input">
                <select id="pref-location-results"></select>
                <button class="btn-small" id="setLocationBtn"><i class="fas fa-check"></i> Set</button>
              </div>
            </div>
            <div class="pref-row" id="currentLocationRow">
              <label>Current Location</label>
              <span class="location-display" id="currentLocationDisplay">Not set</span>
            </div>
          </div>
          <div class="pref-section">
            <h3>API Settings</h3>
            <div class="pref-row">
              <label>Provider</label>
              <select id="pref-weather-provider">
                <option value="openmeteo">Open-Meteo (Free, no key)</option>
                <option value="openweathermap">OpenWeatherMap (Requires key)</option>
                <option value="weatherapi">WeatherAPI.com (Requires key)</option>
              </select>
            </div>
            <div class="pref-row">
              <label>API Key</label>
              <div class="location-input">
                <input type="password" id="pref-weather-api-key" placeholder="Enter API key if required">
                <button class="btn-small" id="toggleWeatherApiKey" title="Show/Hide"><i class="fas fa-eye"></i></button>
              </div>
            </div>
            <div class="pref-row">
              <label></label>
              <div class="small" style="color:var(--muted);">
                <p>• Open-Meteo: Free, no API key required (default)</p>
                <p>• OpenWeatherMap: Get key at <a href="https://openweathermap.org/api" target="_blank">openweathermap.org/api</a></p>
                <p>• WeatherAPI.com: Get key at <a href="https://www.weatherapi.com/" target="_blank">weatherapi.com</a></p>
              </div>
            </div>
          </div>
        </div>

        <!-- Debug Tab -->
        <div class="tab-content" id="tab-debug">
          <div class="pref-section">
            <h3>Console Logging</h3>
            <p class="small" style="color:var(--muted); margin-bottom:16px;">Enable console logging for specific modules to debug issues. Logs will only appear in the browser console when enabled.</p>
            <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:12px;">
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-sw">
                  <span>Service Worker</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-network">
                  <span>Network</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-websocket">
                  <span>WebSocket</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-search">
                  <span>Search</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-app">
                  <span>App</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-core">
                  <span>Core</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-system">
                  <span>System</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-weather">
                  <span>Weather</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-github">
                  <span>GitHub</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-rss">
                  <span>RSS</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-layout">
                  <span>Layout</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-preferences">
                  <span>Preferences</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-config">
                  <span>Config</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-calendar">
                  <span>Calendar</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-todo">
                  <span>Todo</span>
                </label>
              </div>
              <div class="pref-row" style="flex-direction:column; align-items:flex-start; padding:8px 0;">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                  <input type="checkbox" id="debug-quicklinks">
                  <span>Quicklinks</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="tab-about">
          <div class="pref-section about-section">
            <div class="about-logo"><i class="fas fa-home fa-3x"></i></div>
            <h3>LAN Index Dashboard</h3>
            <p class="about-version">Version {{.AppVersion}}</p>
            <p class="about-desc">A personal dashboard for monitoring your system, weather, GitHub activity, and more.</p>
            <div class="about-links">
              <a href="https://github.com/Earentir/homepage" target="_blank" rel="noreferrer"><i class="fab fa-github"></i> Source Code</a>
            </div>
            <p class="about-copyright">© {{.Year}} Earentir</p>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Load modular JavaScript -->
<script src="/static/js/core.js"></script>
<script src="/static/js/graphs.js"></script>
<script src="/static/js/modules/system.js"></script>
<script src="/static/js/modules/weather.js"></script>
<script src="/static/js/modules/websocket.js"></script>
<script src="/static/js/modules/network.js"></script>
<script src="/static/js/modules/search.js"></script>
<script src="/static/js/modules/github.js"></script>
<script src="/static/js/modules/rss.js"></script>
<script src="/static/js/modules/quicklinks.js"></script>
<script src="/static/js/modules/monitoring.js"></script>
<script src="/static/js/modules/snmp.js"></script>
<script src="/static/js/modules/calendar.js"></script>
<script src="/static/js/modules/todo.js"></script>
<script src="/static/js/modules/config.js"></script>
<script src="/static/js/layout.js"></script>
<script src="/static/js/preferences.js"></script>
<script src="/static/js/app.js"></script>

<style>
.header {
  justify-content: center;
}
.card[data-module] {
  user-select: none;
}
.card h3 .header-icons {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}
.card[data-module] .drag-handle {
  opacity: 0.3;
  cursor: grab;
  font-size: 12px;
  transition: opacity 0.2s ease;
  pointer-events: auto;
}
.card[data-module]:hover .drag-handle {
  opacity: 0.6;
}
.card[data-module] .drag-handle:active {
  cursor: grabbing;
  opacity: 0.8;
}
.card.drag-over {
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px var(--accent) !important;
  transform: scale(1.02);
}
.card[data-module] .timer-circle {
  pointer-events: auto;
  flex-shrink: 0;
}
.card h3 .header-icons a {
  opacity: 0.7;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
}
.card h3 .header-icons a:hover {
  opacity: 1;
}
.ptr {
  color: var(--muted);
  font-size: 11px;
  margin-top: 2px;
  font-family: inherit;
}
.card[data-module="cpu"],
.card[data-module="ram"],
.card[data-module="disk"] {
  display: flex;
  flex-direction: column;
}
.cpu-graph,
.usage-graph {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 32px;
  width: 100%;
  margin-top: auto;
  background: rgba(0,0,0,0.1);
  border-radius: 4px;
  overflow: hidden;
  padding: 3px;
}
.cpu-graph .bar,
.usage-graph .bar {
  flex: 1;
  min-width: 0;
  background: var(--accent);
  border-radius: 2px;
  transition: height 0.3s ease;
  opacity: 0.8;
}
.cpu-graph .bar:last-child,
.usage-graph .bar:last-child {
  opacity: 1;
}
.full-bars .bar {
  --fill-pct: 0%;
  background: linear-gradient(to top, var(--accent) 0%, var(--accent) var(--fill-pct), rgba(255,255,255,0.08) var(--fill-pct), rgba(255,255,255,0.08) 100%);
}
.full-bars .bar:last-child {
  background: linear-gradient(to top, var(--accent) 0%, var(--accent) var(--fill-pct), rgba(255,255,255,0.12) var(--fill-pct), rgba(255,255,255,0.12) 100%);
}
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(4px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  padding: 20px;
}
.modal-overlay.active {
  display: flex;
}
.modal {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  width: 80%;
  max-width: 1800px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}
.modal-header h2 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--txt);
  display: flex;
  align-items: center;
  gap: 10px;
}
.modal-close {
  background: none;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 16px;
  padding: 5px;
  transition: color 0.2s;
}
.modal-close:hover {
  color: var(--txt);
}
.modal-tabs {
  display: flex;
  border-bottom: 1px solid var(--border);
  padding: 0 20px;
  flex-wrap: wrap;
}
.modal-tab {
  background: none;
  border: none;
  color: var(--muted);
  padding: 12px 16px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}
.modal-tab:hover {
  color: var(--txt);
}
.modal-tab.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
}
.modal-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}
.tab-content {
  display: none;
}
.tab-content.active {
  display: block;
}
.pref-section {
  margin-bottom: 24px;
}
.pref-section:last-child {
  margin-bottom: 0;
}
.pref-section h3 {
  margin: 0 0 12px 0;
  font-size: 12px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.pref-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
}
.pref-row:last-child {
  border-bottom: none;
}
.pref-row label {
  color: var(--txt);
  font-size: 13px;
  font-weight: 500;
}
.pref-row select,
.pref-row input[type="number"],
.pref-row input[type="text"],
.pref-row input[type="password"] {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--txt);
  padding: 6px 10px;
  font-size: 13px;
  min-width: 140px;
}
.pref-row select:focus,
.pref-row input:focus {
  outline: none;
  border-color: var(--accent);
}
.btn-small {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--txt);
  padding: 6px 12px;
  font-size: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s;
}
.btn-small:hover:not(:disabled) {
  border-color: var(--accent);
  color: var(--accent);
}
.btn-small:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
.location-input {
  display: flex;
  gap: 6px;
  align-items: center;
}
.location-input input[type="text"],
.location-input select {
  flex: 1;
  min-width: 150px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--txt);
  padding: 6px 10px;
  font-size: 13px;
}
.location-input input[type="text"]:focus,
.location-input select:focus {
  outline: none;
  border-color: var(--accent);
}
.location-display {
  color: var(--muted);
  font-size: 13px;
}
.icon-selector {
  display: flex;
  gap: 6px;
  align-items: center;
}
.icon-selector select {
  flex: 1;
  min-width: 150px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--txt);
  padding: 6px 10px;
  font-size: 13px;
}
.icon-selector select:focus {
  outline: none;
  border-color: var(--accent);
}
.layout-grid {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.layout-row {
  display: grid;
  gap: 16px;
  min-height: 100px;
}
.layout-column {
  min-height: 100px;
  position: relative;
}
.layout-column.empty-column {
  border: 1px solid transparent;
  border-radius: 8px;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  min-height: 100px;
}
.layout-column.empty-column.dragging-active {
  border: 2px dashed var(--border);
  background: var(--panel2);
}
.layout-column.empty-column.dragging-active:hover,
.layout-column.empty-column.drag-over {
  border-color: var(--accent);
  background: var(--panel);
}
.layout-column.drag-over {
  border-color: var(--accent) !important;
  background: var(--panel) !important;
}
.empty-column-hint {
  color: var(--muted);
  font-size: 13px;
  pointer-events: none;
}
.layout-column.empty-column.dragging-active .empty-column-hint {
  display: block !important;
}
.layout-column:not(.empty-column) .card {
  width: 100%;
  height: 100%;
}
.split-column {
  position: relative;
}
.split-slot {
  border-radius: 8px;
  transition: all 0.2s;
}
.split-slot .card {
  height: auto !important;
  overflow: hidden;
}
.split-slot.empty-split {
  border: 1px dashed var(--border);
  background: var(--panel2);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 60px;
}
.split-slot.empty-split:hover {
  border-color: var(--accent);
}
.layout-row-editor {
  padding: 12px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 8px;
  margin-bottom: 8px;
}
.layout-row-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}
.layout-row-controls span {
  min-width: 60px;
  font-weight: 500;
}
.layout-row-controls select {
  flex: 1;
  max-width: 150px;
}
.layout-buttons {
  display: flex;
  gap: 8px;
}
.layout-btn {
  width: 36px;
  height: 36px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: all 0.2s;
}
.layout-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}
.layout-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg);
}
.quicklinks-grid {
  display: grid;
  gap: 8px;
}
.quicklinks-grid.cols-1 {
  grid-template-columns: 1fr;
}
.quicklinks-grid.cols-2 {
  grid-template-columns: repeat(2, 1fr);
}
.quicklinks-grid.cols-3 {
  grid-template-columns: repeat(3, 1fr);
}
.quicklinks-grid .ql-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: var(--panel2);
  border-radius: 6px;
  border: 1px solid var(--border);
  transition: border-color 0.2s;
}
.quicklinks-grid .ql-item:hover {
  border-color: var(--accent);
}
.quicklinks-grid .ql-item a {
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--txt);
  text-decoration: none;
  font-size: 13px;
  flex: 1;
  min-width: 0;
}
.quicklinks-grid .ql-item a:hover {
  color: var(--accent);
}
.quicklinks-grid .ql-item .ql-icon {
  color: var(--accent);
  font-size: 14px;
  flex-shrink: 0;
}
.quicklinks-grid .ql-item .ql-title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.module-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.module-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  transition: border-color 0.2s;
}
.module-item:hover {
  border-color: var(--accent);
}
.module-item .module-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(var(--accent-rgb, 136,192,208), 0.1);
  border-radius: 6px;
  color: var(--accent);
  font-size: 14px;
}
.module-item .module-info {
  flex: 1;
  min-width: 0;
}
.module-item .module-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--txt);
}
.module-item .module-desc {
  font-size: 11px;
  color: var(--muted);
  margin-top: 2px;
}
.module-item .module-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}
.module-item.dragging {
  opacity: 0.5;
  cursor: grabbing;
}
.module-item.drag-over {
  border-top: 2px solid var(--accent);
  margin-top: -2px;
}
.module-item .drag-handle {
  cursor: grab;
}
.module-item .drag-handle:active {
  cursor: grabbing;
}
.module-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--accent);
  cursor: pointer;
}
.module-item.disabled {
  opacity: 0.5;
}
.about-section {
  text-align: center;
  padding: 20px;
}
.about-logo {
  color: var(--accent);
  margin-bottom: 16px;
}
.about-section h3 {
  font-size: 18px;
  color: var(--txt);
  margin-bottom: 4px;
  text-transform: none;
  letter-spacing: 0;
}
.about-version {
  color: var(--muted);
  font-size: 12px;
  margin-bottom: 16px;
}
.about-desc {
  color: var(--txt);
  font-size: 13px;
  line-height: 1.6;
  margin-bottom: 20px;
}
.about-links {
  margin-bottom: 20px;
}
.about-links a {
  color: var(--accent);
  text-decoration: none;
  font-size: 13px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.about-links a:hover {
  text-decoration: underline;
}
.about-copyright {
  color: var(--muted);
  font-size: 11px;
}
</style>
</body>
</html>
